# BRC-43: Security Levels, Protocol IDs, Key IDs and Counterparties

Ty Everett (ty@projectbabbage.com)

## Abstract

We propose a standard format for invoice numbers that enables secure and permissioned access to a set of restricted key derivation universes within the context of BRC-42 derivation. The format defines a string that includes the security level, protocol ID, and key ID separated by hyphens. Security level 0 implies no permissions, level 1 grants permissions to all key IDs and all counterparties for the given protocol ID, and level 2 grants permissions only to a particular counterparty. The standard aims to enable the creation of protocols that can request permission to access data controlled by a user in a secure and standardized way.

## Motivation

The BRC-42 key derivation architecture allows parties to derive child keys for each other based on flexible invoice numbering schemes. However, the lack of a standard format for invoice numbers creates challenges for using different sets of keys for different purposes. This standard proposes a solution to address these challenges by defining a common standard for formatting invoice numbers.

By enabling the development of various classes of protocols, each with different security models, this standard allows for the sharing of a common set of root keys while keeping key universes separate. This approach provides an easy-to-use solution for various applications, including Bitcoin and MetaNet client software, where different applications require access to various classes of a user's data.

The proposed scheme for keyIDs is open-ended and can be defined by the rules for each protocol, making it easy to implement and apply to a wide range of use cases. This standard makes it easier for software using BRC-42 key derivation for cryptographic operations to protect user data by granting permission for particular parties to access and use keys based on the security level for the protocol. Overall, the adoption of this standard will simplify and enhance the use of BRC-42 key derivation in a variety of contexts, improving security and facilitating innovation.

## Specification

We specify that an invoice number has the following three components:

Component      | Description
---------------|---------------------
Security Level | Denotes the level of permissioning security applied to protocols using the scheme.
Protocol ID    | The identifier for the protocol that is using the scheme.
Key ID         | Protocol-specific information used to arrive at a particular key under a particular protocol.

We specify the following format for invoice numbers:

```
<securityLevel>-<protocolID>-<keyID>
```

### Examples

We specify various attributes of the system by example.


### Rules

We specify various rules for the system.


## Implementation

The system is implemented into the Babbage SDK, which employs protocol IDs, key IDs and security levels when facilitating the functionality of the encryption and digital signature creation components.
